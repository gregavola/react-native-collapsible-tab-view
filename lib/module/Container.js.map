{"version":3,"names":["React","StyleSheet","useWindowDimensions","View","PagerView","Animated","runOnJS","runOnUI","useAnimatedReaction","useAnimatedStyle","useDerivedValue","useSharedValue","withDelay","withTiming","useFrameCallback","Context","TabNameContext","MaterialTabBar","TABBAR_HEIGHT","Tab","IS_IOS","ONE_FRAME_MS","scrollToImpl","useAnimatedDynamicRefs","useContainerRef","usePageScrollHandler","useTabProps","useLayoutHeight","AnimatedPagerView","createAnimatedComponent","Container","memo","forwardRef","ref","initialTabName","headerHeight","initialHeaderHeight","minHeaderHeight","tabBarHeight","initialTabBarHeight","revealHeaderOnScroll","snapThreshold","children","renderHeader","renderTabBar","props","headerContainerStyle","cancelTranslation","containerStyle","pagerProps","onIndexChange","onTabChange","width","customWidth","allowHeaderOverscroll","containerRef","tabProps","tabNamesArray","refMap","setRef","windowWidth","containerHeight","getContainerLayoutHeight","getTabBarHeight","getHeaderHeight","initialIndex","useMemo","findIndex","n","contentInset","snappingTo","offset","accScrollY","oldAccScrollY","accDiffClamp","scrollYCurrent","scrollY","Object","fromEntries","map","contentHeights","tabNames","index","focusedTab","value","calculateNextOffset","headerScrollDistance","undefined","indexDecimal","afterRender","useEffect","duration","resyncTabScroll","name","trigger","nextIndex","Math","round","propagateTabChange","useCallback","change","syncCurrentTabScrollPosition","toggleSyncScrollFrame","toggle","syncScrollFrame","setActive","timeSinceFirstFrame","i","prevIndex","prevTabName","tabName","_current","prev","headerTranslateY","min","stylez","transform","translateY","onTabPress","current","setPage","length","tabLength","pageScrollHandler","onPageScroll","e","position","useImperativeHandle","setIndex","jumpToTab","getFocusedTab","getCurrentIndex","styles","container","topContainer","headerContainer","tabBarContainer","style","absoluteFill","pageContainer","Children","toArray","create","flex","height","zIndex","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["Container.tsx"],"sourcesContent":["import React from 'react'\nimport { StyleSheet, useWindowDimensions, View } from 'react-native'\nimport PagerView from 'react-native-pager-view'\nimport Animated, {\n  runOnJS,\n  runOnUI,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n  useFrameCallback,\n} from 'react-native-reanimated'\n\nimport { Context, TabNameContext } from './Context'\nimport { MaterialTabBar, TABBAR_HEIGHT } from './MaterialTabBar'\nimport { Tab } from './Tab'\nimport { IS_IOS, ONE_FRAME_MS, scrollToImpl } from './helpers'\nimport {\n  useAnimatedDynamicRefs,\n  useContainerRef,\n  usePageScrollHandler,\n  useTabProps,\n  useLayoutHeight,\n} from './hooks'\nimport {\n  CollapsibleProps,\n  CollapsibleRef,\n  ContextType,\n  IndexChangeEventData,\n  TabName,\n} from './types'\n\nconst AnimatedPagerView = Animated.createAnimatedComponent(PagerView)\n\n/**\n * Basic usage looks like this:\n *\n * ```tsx\n * import { Tabs } from 'react-native-collapsible-tab-view'\n *\n * const Example = () => {\n *   return (\n *     <Tabs.Container renderHeader={MyHeader}>\n *       <Tabs.Tab name=\"A\">\n *         <ScreenA />\n *       </Tabs.Tab>\n *       <Tabs.Tab name=\"B\">\n *         <ScreenB />\n *       </Tabs.Tab>\n *     </Tabs.Container>\n *   )\n * }\n * ```\n */\nexport const Container = React.memo(\n  React.forwardRef<CollapsibleRef, CollapsibleProps>(\n    (\n      {\n        initialTabName,\n        headerHeight: initialHeaderHeight,\n        minHeaderHeight = 0,\n        tabBarHeight: initialTabBarHeight = TABBAR_HEIGHT,\n        revealHeaderOnScroll = false,\n        snapThreshold,\n        children,\n        renderHeader,\n        renderTabBar = (props) => <MaterialTabBar {...props} />,\n        headerContainerStyle,\n        cancelTranslation,\n        containerStyle,\n        pagerProps,\n        onIndexChange,\n        onTabChange,\n        width: customWidth,\n        allowHeaderOverscroll,\n      },\n      ref\n    ) => {\n      const containerRef = useContainerRef()\n\n      const [tabProps, tabNamesArray] = useTabProps(children, Tab)\n\n      const [refMap, setRef] = useAnimatedDynamicRefs()\n\n      const windowWidth = useWindowDimensions().width\n      const width = customWidth ?? windowWidth\n\n      const [containerHeight, getContainerLayoutHeight] = useLayoutHeight()\n\n      const [tabBarHeight, getTabBarHeight] =\n        useLayoutHeight(initialTabBarHeight)\n\n      const [headerHeight, getHeaderHeight] = useLayoutHeight(\n        !renderHeader ? 0 : initialHeaderHeight\n      )\n      const initialIndex = React.useMemo(\n        () =>\n          initialTabName\n            ? tabNamesArray.findIndex((n) => n === initialTabName)\n            : 0,\n        [initialTabName, tabNamesArray]\n      )\n\n      const contentInset = React.useMemo(() => {\n        if (allowHeaderOverscroll) return 0\n\n        // necessary for the refresh control on iOS to be positioned underneath the header\n        // this also adjusts the scroll bars to clamp underneath the header area\n        return IS_IOS ? (headerHeight || 0) + (tabBarHeight || 0) : 0\n      }, [headerHeight, tabBarHeight, allowHeaderOverscroll])\n\n      const snappingTo: ContextType['snappingTo'] = useSharedValue(0)\n      const offset: ContextType['offset'] = useSharedValue(0)\n      const accScrollY: ContextType['accScrollY'] = useSharedValue(0)\n      const oldAccScrollY: ContextType['oldAccScrollY'] = useSharedValue(0)\n      const accDiffClamp: ContextType['accDiffClamp'] = useSharedValue(0)\n      const scrollYCurrent: ContextType['scrollYCurrent'] = useSharedValue(0)\n      const scrollY: ContextType['scrollY'] = useSharedValue(\n        Object.fromEntries(tabNamesArray.map((n) => [n, 0]))\n      )\n\n      const contentHeights: ContextType['contentHeights'] = useSharedValue(\n        tabNamesArray.map(() => 0)\n      )\n\n      const tabNames: ContextType['tabNames'] = useDerivedValue<TabName[]>(\n        () => tabNamesArray,\n        [tabNamesArray]\n      )\n      const index: ContextType['index'] = useSharedValue(initialIndex)\n\n      const focusedTab: ContextType['focusedTab'] =\n        useDerivedValue<TabName>(() => {\n          return tabNames.value[index.value]\n        }, [tabNames])\n      const calculateNextOffset = useSharedValue(initialIndex)\n      const headerScrollDistance: ContextType['headerScrollDistance'] =\n        useDerivedValue(() => {\n          return headerHeight !== undefined ? headerHeight - minHeaderHeight : 0\n        }, [headerHeight, minHeaderHeight])\n\n      const indexDecimal: ContextType['indexDecimal'] = useSharedValue(\n        index.value\n      )\n\n      const afterRender = useSharedValue(0)\n      React.useEffect(() => {\n        afterRender.value = withDelay(\n          ONE_FRAME_MS * 5,\n          withTiming(1, { duration: 0 })\n        )\n      }, [afterRender, tabNamesArray])\n\n      const resyncTabScroll = () => {\n        'worklet'\n        for (const name of tabNamesArray) {\n          scrollToImpl(\n            refMap[name],\n            0,\n            scrollYCurrent.value - contentInset,\n            false\n          )\n        }\n      }\n\n      // the purpose of this is to scroll to the proper position if dynamic tabs are changing\n      useAnimatedReaction(\n        () => {\n          return afterRender.value === 1\n        },\n        (trigger) => {\n          if (trigger) {\n            afterRender.value = 0\n            resyncTabScroll()\n          }\n        },\n        [tabNamesArray, refMap, afterRender, contentInset]\n      )\n\n      // derived from scrollX\n      // calculate the next offset and index if swiping\n      // if scrollX changes from tab press,\n      // the same logic must be done, but knowing\n      // the next index in advance\n      useAnimatedReaction(\n        () => {\n          const nextIndex = Math.round(indexDecimal.value)\n          return nextIndex\n        },\n        (nextIndex) => {\n          if (nextIndex !== null && nextIndex !== index.value) {\n            calculateNextOffset.value = nextIndex\n          }\n        },\n        []\n      )\n\n      const propagateTabChange = React.useCallback(\n        (change: IndexChangeEventData<TabName>) => {\n          onTabChange?.(change)\n          onIndexChange?.(change.index)\n        },\n        [onIndexChange, onTabChange]\n      )\n\n      const syncCurrentTabScrollPosition = () => {\n        'worklet'\n\n        const name = tabNamesArray[index.value]\n        scrollToImpl(\n          refMap[name],\n          0,\n          scrollYCurrent.value - contentInset,\n          false\n        )\n      }\n\n      /*\n       * We run syncCurrentTabScrollPosition in every frame after the index\n       * changes for about 1500ms because the Lists can be late to accept the\n       * scrollTo event we send. This fixes the issue of the scroll position\n       * jumping when the user changes tab.\n       * */\n      const toggleSyncScrollFrame = (toggle: boolean) =>\n        syncScrollFrame.setActive(toggle)\n      const syncScrollFrame = useFrameCallback(({ timeSinceFirstFrame }) => {\n        syncCurrentTabScrollPosition()\n        if (timeSinceFirstFrame > 1500) {\n          runOnJS(toggleSyncScrollFrame)(false)\n        }\n      }, false)\n\n      useAnimatedReaction(\n        () => {\n          return calculateNextOffset.value\n        },\n        (i) => {\n          if (i !== index.value) {\n            offset.value =\n              scrollY.value[tabNames.value[index.value]] -\n              scrollY.value[tabNames.value[i]] +\n              offset.value\n            runOnJS(propagateTabChange)({\n              prevIndex: index.value,\n              index: i,\n              prevTabName: tabNames.value[index.value],\n              tabName: tabNames.value[i],\n            })\n            index.value = i\n            if (\n              typeof scrollY.value[tabNames.value[index.value]] === 'number'\n            ) {\n              scrollYCurrent.value =\n                scrollY.value[tabNames.value[index.value]] || 0\n            }\n            runOnJS(toggleSyncScrollFrame)(true)\n          }\n        },\n        []\n      )\n\n      useAnimatedReaction(\n        () => headerHeight,\n        (_current, prev) => {\n          if (prev === undefined) {\n            // sync scroll if we started with undefined header height\n            resyncTabScroll()\n          }\n        }\n      )\n\n      const headerTranslateY = useDerivedValue(() => {\n        return revealHeaderOnScroll\n          ? -accDiffClamp.value\n          : -Math.min(scrollYCurrent.value, headerScrollDistance.value)\n      }, [revealHeaderOnScroll])\n\n      const stylez = useAnimatedStyle(() => {\n        return {\n          transform: [\n            {\n              translateY: headerTranslateY.value,\n            },\n          ],\n        }\n      }, [revealHeaderOnScroll])\n\n      const onTabPress = React.useCallback(\n        (name: TabName) => {\n          const i = tabNames.value.findIndex((n) => n === name)\n\n          if (name === focusedTab.value) {\n            const ref = refMap[name]\n            runOnUI(scrollToImpl)(\n              ref,\n              0,\n              headerScrollDistance.value - contentInset,\n              true\n            )\n          } else {\n            containerRef.current?.setPage(i)\n          }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [containerRef, refMap, contentInset]\n      )\n\n      useAnimatedReaction(\n        () => tabNamesArray.length,\n        (tabLength) => {\n          if (index.value >= tabLength) {\n            runOnJS(onTabPress)(tabNamesArray[tabLength - 1])\n          }\n        }\n      )\n\n      const pageScrollHandler = usePageScrollHandler({\n        onPageScroll: (e) => {\n          'worklet'\n          indexDecimal.value = e.position + e.offset\n        },\n      })\n\n      React.useImperativeHandle(\n        ref,\n        () => ({\n          setIndex: (index) => {\n            const name = tabNames.value[index]\n            onTabPress(name)\n            return true\n          },\n          jumpToTab: (name) => {\n            onTabPress(name)\n            return true\n          },\n          getFocusedTab: () => {\n            return tabNames.value[index.value]\n          },\n          getCurrentIndex: () => {\n            return index.value\n          },\n        }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [onTabPress]\n      )\n\n      return (\n        <Context.Provider\n          value={{\n            contentInset,\n            tabBarHeight,\n            headerHeight,\n            refMap,\n            tabNames,\n            index,\n            snapThreshold,\n            revealHeaderOnScroll,\n            focusedTab,\n            accDiffClamp,\n            indexDecimal,\n            containerHeight,\n            minHeaderHeight,\n            scrollYCurrent,\n            scrollY,\n            setRef,\n            headerScrollDistance,\n            accScrollY,\n            oldAccScrollY,\n            offset,\n            snappingTo,\n            contentHeights,\n            headerTranslateY,\n            width,\n            allowHeaderOverscroll,\n          }}\n        >\n          <Animated.View\n            style={[styles.container, { width }, containerStyle]}\n            onLayout={getContainerLayoutHeight}\n            pointerEvents=\"box-none\"\n          >\n            <Animated.View\n              pointerEvents=\"box-none\"\n              style={[\n                styles.topContainer,\n                headerContainerStyle,\n                !cancelTranslation && stylez,\n              ]}\n            >\n              <View\n                style={[styles.container, styles.headerContainer]}\n                onLayout={getHeaderHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderHeader &&\n                  renderHeader({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n              <View\n                style={[styles.container, styles.tabBarContainer]}\n                onLayout={getTabBarHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderTabBar &&\n                  renderTabBar({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    width,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n            </Animated.View>\n\n            <AnimatedPagerView\n              ref={containerRef}\n              onPageScroll={pageScrollHandler}\n              initialPage={initialIndex}\n              {...pagerProps}\n              style={[pagerProps?.style, StyleSheet.absoluteFill]}\n            >\n              {tabNamesArray.map((tabName, i) => {\n                return (\n                  <View key={i} style={styles.pageContainer}>\n                    <TabNameContext.Provider value={tabName}>\n                      {\n                        React.Children.toArray(children)[\n                          i\n                        ] as React.ReactElement\n                      }\n                    </TabNameContext.Provider>\n                  </View>\n                )\n              })}\n            </AnimatedPagerView>\n          </Animated.View>\n        </Context.Provider>\n      )\n    }\n  )\n)\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  pageContainer: {\n    height: '100%',\n    width: '100%',\n  },\n  topContainer: {\n    position: 'absolute',\n    zIndex: 100,\n    width: '100%',\n    backgroundColor: 'white',\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.23,\n    shadowRadius: 2.62,\n    elevation: 4,\n  },\n  tabBarContainer: {\n    zIndex: 1,\n  },\n  headerContainer: {\n    zIndex: 2,\n  },\n})\n"],"mappings":"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"}